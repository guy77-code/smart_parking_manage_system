# 预订查找逻辑说明

## 查找条件（按优先级）

1. **车牌号匹配**：通过 `license_plate` 查找对应的 `vehicle_id`
2. **时间匹配**：当前时间在预订时间段内
   - 允许提前30分钟入场：`start_time <= (now + 30分钟)`
   - 预订未过期：`end_time >= (now - 30分钟)`
3. **停车场匹配**（如果提供 `lot_id`）：`lot_id = ?`
4. **状态匹配**：`status = 1`（已预订）

## 时间判断逻辑

假设当前时间为 `now`，预订时间为 `start_time` 到 `end_time`：

- 允许提前30分钟入场：`start_time <= now + 30分钟`
- 预订未过期：`end_time >= now - 30分钟`

这意味着：
- 如果预订开始时间是 10:00，当前时间是 9:30，可以入场（提前30分钟）
- 如果预订结束时间是 12:00，当前时间是 12:30，不能入场（已过期30分钟）

