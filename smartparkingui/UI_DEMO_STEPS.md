# UI功能演示步骤

## 准备工作

1. **启动后端服务器**
   ```bash
   cd smart_parking_backend
   go run main.go
   ```

2. **创建演示账号**
   ```bash
   cd smartparkingui
   bash create_demo_users.sh
   ```
   脚本会创建测试用户和管理员账号，并显示账号信息。

3. **在Qt Creator中运行应用**
   - 打开项目：`smartparkingui/CMakeLists.txt`
   - 构建项目（Ctrl+B）
   - 运行项目（Ctrl+R）

## 功能演示步骤

### 场景一：普通用户完整流程

#### 步骤1：用户登录
1. 应用启动后，显示登录页面
2. 选择"用户"模式
3. 输入演示用户1的手机号和密码（从create_demo_users.sh输出获取）
4. 点击"登录"
5. ✅ 验证：成功进入用户主页面

#### 步骤2：查看停车状态
1. 在用户主页面，默认显示"停车状态"标签页
2. ✅ 验证：显示"当前暂无车辆在使用停车场"或显示已有停车记录

#### 步骤3：车辆入场
1. 点击"停车"按钮
2. 系统会调用API获取停车场列表
3. 选择停车场（如果实现了选择对话框）
4. 调用车辆入场接口
5. ✅ 验证：停车状态更新，显示车辆信息

#### 步骤4：查看预订信息
1. 切换到"预订信息"标签页
2. 点击"新建预订"按钮
3. 选择停车场、车辆、时间
4. 点击"查看车位可视化"查看车位状态
5. 点击"提交预订"
6. ✅ 验证：预订成功，列表更新

#### 步骤5：车辆出场
1. 返回"停车状态"标签页
2. 点击"离开"按钮
3. ✅ 验证：显示费用信息，跳转到支付页面

#### 步骤6：支付
1. 在支付页面，选择支付方式（支付宝/微信）
2. 点击"确认支付"
3. ✅ 验证：支付成功，返回用户主页面

#### 步骤7：查看订单历史
1. 切换到"订单历史"标签页
2. ✅ 验证：显示刚才的支付记录

#### 步骤8：查看违规记录
1. 切换到"违规记录"标签页
2. ✅ 验证：显示违规记录（如果有）

### 场景二：系统管理员功能

#### 步骤1：管理员登录
1. 退出当前用户（点击"退出登录"）
2. 在登录页面选择"管理员"模式
3. 输入系统管理员手机号和密码
4. 点击"登录"
5. ✅ 验证：进入管理员主页面

#### 步骤2：停车场管理
1. 切换到"停车场管理"标签页
2. ✅ 验证：显示所有停车场列表
3. 点击"查看详情"查看停车场信息

#### 步骤3：违规分析
1. 切换到"违规分析"标签页
2. 选择年份和月份
3. 点击"查询"
4. ✅ 验证：显示违规统计数据

### 场景三：停车场管理员功能

#### 步骤1：停车场管理员登录
1. 退出当前管理员
2. 使用停车场管理员账号登录
3. ✅ 验证：进入管理员主页面

#### 步骤2：车位管理
1. 切换到"车位管理"标签页
2. ✅ 验证：显示该管理员管理的停车场车位列表
3. 点击"修改状态"修改车位状态

#### 步骤3：数据分析
1. 切换到"数据分析"标签页
2. 输入开始时间和结束时间（RFC3339格式）
3. 点击"查询"
4. ✅ 验证：显示使用率分析结果

#### 步骤4：报表生成
1. 切换到"报表生成"标签页
2. 选择报表类型（月度/年度）
3. 选择年份和月份
4. 点击"生成报表"
5. ✅ 验证：显示报表数据

## 功能检查清单

### 用户功能
- [ ] 用户注册
- [ ] 用户登录
- [ ] 查看停车状态
- [ ] 车辆入场
- [ ] 车辆出场
- [ ] 创建预订
- [ ] 查看预订列表
- [ ] 查看订单历史
- [ ] 查看违规记录
- [ ] 支付功能

### 管理员功能
- [ ] 管理员登录
- [ ] 停车场管理（系统管理员）
- [ ] 违规分析（系统管理员）
- [ ] 车位管理（停车场管理员）
- [ ] 使用率分析（停车场管理员）
- [ ] 报表生成（停车场管理员）

## 常见问题排查

### 问题1：无法连接到服务器
**检查项：**
- 后端服务器是否运行
- API地址是否正确（默认：http://127.0.0.1:8080）
- 网络连接是否正常

**解决方法：**
```bash
# 检查后端服务器
curl http://127.0.0.1:8080/api/v2/getparkinglots
```

### 问题2：登录失败
**检查项：**
- 账号是否已创建
- 手机号和密码是否正确
- 查看控制台错误信息

**解决方法：**
- 重新运行 `create_demo_users.sh` 创建账号
- 检查账号信息是否正确

### 问题3：数据不显示
**检查项：**
- API请求是否成功
- 响应数据格式是否正确
- 查看浏览器控制台（F12）

**解决方法：**
- 检查后端日志
- 使用测试脚本验证API

### 问题4：构建错误
**检查项：**
- resources.qrc文件路径是否正确
- QML文件是否存在
- CMakeLists.txt配置是否正确

**解决方法：**
- 确保resources.qrc在项目根目录
- 检查QML文件路径
- 清理构建目录后重新构建

## 测试数据

运行 `create_demo_users.sh` 后，会生成以下测试账号：

- **普通用户1**：用于测试用户功能
- **普通用户2**：用于测试多用户场景
- **系统管理员**：用于测试系统管理功能
- **停车场管理员**：用于测试停车场管理功能

## 演示建议

1. **按顺序演示**：按照上述步骤顺序演示，确保数据连贯
2. **记录问题**：遇到问题时记录错误信息
3. **验证数据**：每个步骤后验证数据是否正确显示
4. **测试边界情况**：测试错误处理、空数据等情况

